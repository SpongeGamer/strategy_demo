<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>RTS Demo</title>
        <link rel="stylesheet" href="src/css/styles.css">
    </head>
    <body>
        <!-- Стартовый экран -->
        <div id="startscreen" class="screen">
            <div class="title">RTS Demo</div>
            <div class="menu">
                <button id="campaign-button" class="menu-button">Campaign</button>
                <button id="skirmish-button" class="menu-button">Skirmish</button>
                <button id="multiplayer-button" class="menu-button">Multiplayer</button>
                <button id="options-button" class="menu-button">Options</button>
            </div>
        </div>

        <!-- Игровой интерфейс -->
        <div id="gameinterfacescreen" class="screen" style="display: none;">
            <!-- Канвасы для игры -->
            <canvas id="gamebackgroundcanvas" class="gamecanvas"></canvas>
            <canvas id="gameforegroundcanvas" class="gamecanvas"></canvas>
        </div>

        <!-- Загрузка скриптов -->
        <script type="module">
            import { game } from './src/engine/game.js';
            import { singleplayer } from './src/game-modes/singleplayer.js';
            import { Mouse } from './src/engine/mouse.js';
            import { Interface } from './src/ui/interface.js';
            
            // Инициализация игры
            document.addEventListener('DOMContentLoaded', () => {
                console.log('DOM загружен, инициализация игры...');
                
                try {
                    // Инициализируем игровой движок
                    game.init();
                    console.log('Игровой движок инициализирован');
                    
                    // Инициализируем обработчик мыши
                    Mouse.init();
                    console.log('Обработчик мыши инициализирован');
                    
                    // Инициализируем интерфейс
                    Interface.init();
                    console.log('Интерфейс инициализирован');
                    
                    // Добавляем обработчики для кнопок меню
                    const campaignButton = document.getElementById('campaign-button');
                    if (campaignButton) {
                        campaignButton.addEventListener('click', () => {
                            console.log('Нажата кнопка Campaign');
                            singleplayer.start();
                        });
                    } else {
                        console.error('Кнопка Campaign не найдена!');
                    }
                    
                    const skirmishButton = document.getElementById('skirmish-button');
                    if (skirmishButton) {
                        skirmishButton.addEventListener('click', () => {
                            console.log('Нажата кнопка Skirmish');
                            alert('Skirmish mode is not implemented yet');
                        });
                    }
                    
                    const multiplayerButton = document.getElementById('multiplayer-button');
                    if (multiplayerButton) {
                        multiplayerButton.addEventListener('click', () => {
                            console.log('Нажата кнопка Multiplayer');
                            alert('Multiplayer mode is not implemented yet');
                        });
                    }
                    
                    const optionsButton = document.getElementById('options-button');
                    if (optionsButton) {
                        optionsButton.addEventListener('click', () => {
                            console.log('Нажата кнопка Options');
                            alert('Options are not implemented yet');
                        });
                    }
                    
                    console.log('Обработчики кнопок добавлены');
                    console.log('Игра готова к запуску');
                } catch (error) {
                    console.error('Ошибка при инициализации игры:', error);
                }
            });
        </script>
    </body>
</html>