<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <title>RTS Demo</title>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
        <!-- Базовые модули -->
        <script src="src/engine/loader.js" type="module"></script>
        <script src="src/engine/mouse.js" type="module"></script>
        <script src="src/engine/maps.js" type="module"></script>
        <script src="src/engine/game.js" type="module"></script>
        
        <!-- Игровые сущности -->
        <script src="src/entities/buildings/buildings.js" type="module"></script>
        <script src="src/entities/units/units.js" type="module"></script>
        <script src="src/entities/vehicles/vehicles.js" type="module"></script>
        <script src="src/entities/aircraft/aircraft.js" type="module"></script>
        <script src="src/entities/resources/resources.js" type="module"></script>
        
        <!-- Вспомогательные модули -->
        <script src="src/utils/pathfinding-browser.min.js"></script>
        <script src="src/utils/astar.js" type="module"></script>
        <script src="src/utils/fog.js" type="module"></script>
        <script src="src/ui/sidebar.js" type="module"></script>
        <script src="src/ui/interface.js" type="module"></script>
        <script src="src/ui/minimap.js" type="module"></script>
        
        <!-- Игровые режимы -->
        <script src="src/game-modes/singleplayer.js" type="module"></script>
        
        <!-- Основной игровой модуль -->
        <script type="module">
            import { game } from './src/engine/game.js';
            import { singleplayer } from './src/game-modes/singleplayer.js';
            import { initInterface } from './src/ui/interface.js';
            import { initMinimap } from './src/ui/minimap.js';
            import { initSidebar } from './src/ui/sidebar.js';
            
            window.addEventListener('load', () => {
                game.init();
                initInterface();
                initMinimap();
                initSidebar();
                
                document.getElementById('singleplayer').addEventListener('click', singleplayer.start);
            });
        </script>

        <link rel="stylesheet" href="src/css/styles.css" type="text/css" media="screen" charset="utf-8">
    </head>
    <body>
        <main id="gamecontainer">
            <section id="gamestartscreen" class="gamelayer">
                <h1>RTS Demo</h1>
                <button id="singleplayer" class="btn">Campaign</button>
                <button id="multiplayer" class="btn">Multiplayer</button>
            </section>
            
            <section id="gameinterfacescreen" class="gamelayer">
                <div id="gamecanvasarea">
                    <canvas id="gamebackgroundcanvas"></canvas>
                    <canvas id="gameforegroundcanvas"></canvas>
                </div>
                
                <div id="gameinterface">
                    <section id="resources">
                        <div class="resource">
                            <div class="resource-icon trees"></div>
                            <span>Деревья: <span id="trees-count">0</span></span>
                        </div>
                        <div class="resource">
                            <div class="resource-icon metal"></div>
                            <span>Металл: <span id="metal-count">0</span></span>
                        </div>
                        <div class="resource">
                            <div class="resource-icon gold"></div>
                            <span>Золото: <span id="gold-count">0</span></span>
                        </div>
                    </section>

                    <section id="command-panel">
                        <div class="command-group">
                            <button class="command-button" data-action="buildings" title="Строительство">
                                <span class="icon buildings"></span>
                            </button>
                            <button class="command-button" data-action="defenses" title="Оборона">
                                <span class="icon defenses"></span>
                            </button>
                        </div>
                        <div class="command-group">
                            <button class="command-button" data-action="infantry" title="Пехота">
                                <span class="icon infantry"></span>
                            </button>
                            <button class="command-button" data-action="vehicles" title="Техника">
                                <span class="icon vehicles"></span>
                            </button>
                            <button class="command-button" data-action="aircraft" title="Авиация">
                                <span class="icon aircraft"></span>
                            </button>
                        </div>
                    </section>

                    <section id="minimap">
                        <canvas id="minimapcanvas"></canvas>
                    </section>
                </div>
            </section>

            <section id="loadingscreen" class="gamelayer">
                <div id="loadingmessage"></div>
            </section>
        </main>
    </body>
</html>